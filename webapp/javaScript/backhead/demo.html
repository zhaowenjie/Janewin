<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<title>Javascript 返回顶部</title>
	<style type="text/css">
		#btn {width:40px; height:40px; position:fixed; right:65px; bottom:10px;background:url(images/top_bg.png) no-repeat left top;}
		#btn:hover {background:url(images/top_bg.png) no-repeat 0 -39px;}
		.bg {width:1190px; height: 2000px;}
		img{
			opacity: 0;
		}
	</style>
	
</head>
<body>
	<a href="javascript:;" id="btn" title="回到顶部"></a>
	<div class="bg">
	</div>
	<a id='#btn'></a>
</body>

<script type="text/javascript">
window.onload = function(){
    var obtn = document.getElementById('btn');
    //获取页面可视区的高度
	var clientHeight=document.documentElement.clientHeight;
	var timer = null;
	var isTop = true;
    
    window.onscroll=function(){
            //获取滚动条距离顶部的高度
			var osTop=document.documentElement.scrollTop||document.body.scrollTop;
            if (osTop >= clientHeight){
    		 //显示按钮
             obtn.style.display="block";
		}else {
			//隐藏按钮
            obtn.style.display="none";
		}
        
		if (!isTop){
			clearInterval(timer);
		}
		isTop = false;
    }
		
	obtn.onclick = function(){
		
		//设置定时器
		timer = setInterval(function(){
            var osTop=document.documentElement.scrollTop||document.body.scrollTop;
			console.log(osTop);

            var ispeed = Math.floor(-osTop / 6);
			document.documentElement.scrollTop = document.body.scrollTop = osTop +ispeed;
			
			isTop = true;
			// console.log(osTop -ispeed);
			if (osTop == 0){
				clearInterval(timer);
			}
		},30);
		
	}
}
</script>
</html>